{"remainingRequest":"/home/yagnik-vadadoriya/Desktop/Gem-Farm-17-2022/node_modules/babel-loader/lib/index.js!/home/yagnik-vadadoriya/Desktop/Gem-Farm-17-2022/node_modules/ts-loader/index.js??ref--14-2!/home/yagnik-vadadoriya/Desktop/Gem-Farm-17-2022/src/common/gem-bank/index.ts","dependencies":[{"path":"/home/yagnik-vadadoriya/Desktop/Gem-Farm-17-2022/src/common/gem-bank/index.ts","mtime":1661228910000},{"path":"/home/yagnik-vadadoriya/Desktop/Gem-Farm-17-2022/babel.config.js","mtime":1661228910000},{"path":"/home/yagnik-vadadoriya/Desktop/Gem-Farm-17-2022/node_modules/cache-loader/dist/cjs.js","mtime":1663235615568},{"path":"/home/yagnik-vadadoriya/Desktop/Gem-Farm-17-2022/node_modules/babel-loader/lib/index.js","mtime":1663235615501},{"path":"/home/yagnik-vadadoriya/Desktop/Gem-Farm-17-2022/node_modules/ts-loader/index.js","mtime":1663235630214}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9ob21lL3lhZ25pay12YWRhZG9yaXlhL0Rlc2t0b3AvR2VtLUZhcm0tMTctMjAyMi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheS5qcyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL2hvbWUveWFnbmlrLXZhZGFkb3JpeWEvRGVza3RvcC9HZW0tRmFybS0xNy0yMDIyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjay5qcyI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL2hvbWUveWFnbmlrLXZhZGFkb3JpeWEvRGVza3RvcC9HZW0tRmFybS0xNy0yMDIyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcy5qcyI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiL2hvbWUveWFnbmlrLXZhZGFkb3JpeWEvRGVza3RvcC9HZW0tRmFybS0xNy0yMDIyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cy5qcyI7CmltcG9ydCBfY3JlYXRlU3VwZXIgZnJvbSAiL2hvbWUveWFnbmlrLXZhZGFkb3JpeWEvRGVza3RvcC9HZW0tRmFybS0xNy0yMDIyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlci5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvaG9tZS95YWduaWstdmFkYWRvcml5YS9EZXNrdG9wL0dlbS1GYXJtLTE3LTIwMjIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZyb20uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS1idWZmZXIuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudWludDgtYXJyYXkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5hdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmNvcHktd2l0aGluLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZXZlcnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maWxsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW5kZXgtb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5sYXN0LWluZGV4LW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkucmVkdWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkucmVkdWNlLXJpZ2h0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkucmV2ZXJzZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNldC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc29tZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNvcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zdWJhcnJheS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnRvLWxvY2FsZS1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS50by1zdHJpbmcuanMiOwppbXBvcnQgeyBmaW5kV2hpdGVsaXN0UHJvb2ZQREEsIEdFTV9CQU5LX1BST0dfSUQsIEdlbUJhbmtDbGllbnQgfSBmcm9tICdAZ2Vtd29ya3MvZ2VtLWZhcm0tdHMnOwppbXBvcnQgeyBLZXlwYWlyIH0gZnJvbSAnQHNvbGFuYS93ZWIzLmpzJzsKaW1wb3J0IHsgTm9kZVdhbGxldCwgcHJvZ3JhbXMgfSBmcm9tICdAbWV0YXBsZXgvanMnOyAvL3doZW4gd2Ugb25seSB3YW50IHRvIHZpZXcgdmF1bHRzLCBubyBuZWVkIHRvIGNvbm5lY3QgYSByZWFsIHdhbGxldC4KCmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGYWtlV2FsbGV0KCkgewogIHZhciBsZWFrZWRLcCA9IEtleXBhaXIuZnJvbVNlY3JldEtleShVaW50OEFycmF5LmZyb20oWzIwOCwgMTc1LCAxNTAsIDI0MiwgODgsIDM0LCAxMDgsIDg4LCAxNzcsIDE2LCAxNjgsIDc1LCAxMTUsIDE4MSwgMTk5LCAyNDIsIDEyMCwgNCwgNzgsIDc1LCAxOSwgMjI3LCAxMywgMjE1LCAxODQsIDEwOCwgMjI2LCA1MywgMTExLCAxNDksIDE3OSwgODQsIDEzNywgMTIxLCA3OSwgMSwgMTYwLCAyMjMsIDEyNCwgMjQxLCAyMDIsIDIwMywgMjIwLCAyMzcsIDUwLCAyNDIsIDU3LCAxNTgsIDIyNiwgMjA3LCAyMDMsIDE4OCwgNDMsIDI4LCA3MCwgMTEwLCAyMTQsIDIzNCwgMjUxLCAxNSwgMjQ5LCAxNTcsIDYyLCA4MF0pKTsKICByZXR1cm4gbmV3IE5vZGVXYWxsZXQobGVha2VkS3ApOwp9IC8vbmVlZCBhIHNlcGFyYXRlIGZ1bmMgY296IGZldGNoaW5nIElETCBpcyBhc3luYyBhbmQgY2FuJ3QgYmUgZG9uZSBpbiBjb25zdHJ1Y3RvcgoKZXhwb3J0IGZ1bmN0aW9uIGluaXRHZW1CYW5rKF94LCBfeDIpIHsKICByZXR1cm4gX2luaXRHZW1CYW5rLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9pbml0R2VtQmFuaygpIHsKICBfaW5pdEdlbUJhbmsgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KGNvbm4sIHdhbGxldCkgewogICAgdmFyIHdhbGxldFRvVXNlLCBpZGw7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0OCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICB3YWxsZXRUb1VzZSA9IHdhbGxldCAhPT0gbnVsbCAmJiB3YWxsZXQgIT09IHZvaWQgMCA/IHdhbGxldCA6IGNyZWF0ZUZha2VXYWxsZXQoKTsKICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gZmV0Y2goJ2dlbV9iYW5rLmpzb24nKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gNTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zZW50Lmpzb24oKTsKCiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGlkbCA9IF9jb250ZXh0OC5zZW50OwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIiwgbmV3IEdlbUJhbmsoY29ubiwgd2FsbGV0VG9Vc2UsIGlkbCkpOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTgpOwogIH0pKTsKICByZXR1cm4gX2luaXRHZW1CYW5rLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmV4cG9ydCB2YXIgR2VtQmFuayA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0dlbUJhbmtDbGllbnQpIHsKICBfaW5oZXJpdHMoR2VtQmFuaywgX0dlbUJhbmtDbGllbnQpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKEdlbUJhbmspOwoKICBmdW5jdGlvbiBHZW1CYW5rKGNvbm4sIHdhbGxldCwgaWRsKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgR2VtQmFuayk7CgogICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIGNvbm4sIHdhbGxldCwgaWRsLCBHRU1fQkFOS19QUk9HX0lEKTsKICB9CgogIF9jcmVhdGVDbGFzcyhHZW1CYW5rLCBbewogICAga2V5OiAiaW5pdEJhbmtXYWxsZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9pbml0QmFua1dhbGxldCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgYmFuaywgdHhTaWc7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgYmFuayA9IEtleXBhaXIuZ2VuZXJhdGUoKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5pdEJhbmsoYmFuaywgdGhpcy53YWxsZXQucHVibGljS2V5LCB0aGlzLndhbGxldC5wdWJsaWNLZXkpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICB0eFNpZyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgICAgIGJhbms6IGJhbmssCiAgICAgICAgICAgICAgICAgIHR4U2lnOiB0eFNpZwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBpbml0QmFua1dhbGxldCgpIHsKICAgICAgICByZXR1cm4gX2luaXRCYW5rV2FsbGV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBpbml0QmFua1dhbGxldDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImluaXRWYXVsdFdhbGxldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2luaXRWYXVsdFdhbGxldCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoYmFuaykgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgdGhpcy5pbml0VmF1bHQoYmFuaywgdGhpcy53YWxsZXQucHVibGljS2V5LCB0aGlzLndhbGxldC5wdWJsaWNLZXksIHRoaXMud2FsbGV0LnB1YmxpY0tleSwgJ3Rlc3RfdmF1bHQnKSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGluaXRWYXVsdFdhbGxldChfeDMpIHsKICAgICAgICByZXR1cm4gX2luaXRWYXVsdFdhbGxldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gaW5pdFZhdWx0V2FsbGV0OwogICAgfSgpCiAgfSwgewogICAga2V5OiAic2V0VmF1bHRMb2NrV2FsbGV0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc2V0VmF1bHRMb2NrV2FsbGV0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyhiYW5rLCB2YXVsdCwgdmF1bHRMb2NrZWQpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIHRoaXMuc2V0VmF1bHRMb2NrKGJhbmssIHZhdWx0LCB0aGlzLndhbGxldC5wdWJsaWNLZXksIHZhdWx0TG9ja2VkKSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMywgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHNldFZhdWx0TG9ja1dhbGxldChfeDQsIF94NSwgX3g2KSB7CiAgICAgICAgcmV0dXJuIF9zZXRWYXVsdExvY2tXYWxsZXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHNldFZhdWx0TG9ja1dhbGxldDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImRlcG9zaXRHZW1XYWxsZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9kZXBvc2l0R2VtV2FsbGV0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNChiYW5rLCB2YXVsdCwgZ2VtQW1vdW50LCBnZW1NaW50LCBnZW1Tb3VyY2UsIGNyZWF0b3IpIHsKICAgICAgICB2YXIgX3lpZWxkJGZpbmRXaGl0ZWxpc3RQLCBfeWllbGQkZmluZFdoaXRlbGlzdFAyLCBtaW50UHJvb2YsIGJ1bXAsIF95aWVsZCRmaW5kV2hpdGVsaXN0UDMsIF95aWVsZCRmaW5kV2hpdGVsaXN0UDQsIGNyZWF0b3JQcm9vZiwgYnVtcDIsIG1ldGFkYXRhOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGZpbmRXaGl0ZWxpc3RQcm9vZlBEQShiYW5rLCBnZW1NaW50KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX3lpZWxkJGZpbmRXaGl0ZWxpc3RQID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgICBfeWllbGQkZmluZFdoaXRlbGlzdFAyID0gX3NsaWNlZFRvQXJyYXkoX3lpZWxkJGZpbmRXaGl0ZWxpc3RQLCAyKTsKICAgICAgICAgICAgICAgIG1pbnRQcm9vZiA9IF95aWVsZCRmaW5kV2hpdGVsaXN0UDJbMF07CiAgICAgICAgICAgICAgICBidW1wID0gX3lpZWxkJGZpbmRXaGl0ZWxpc3RQMlsxXTsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiBmaW5kV2hpdGVsaXN0UHJvb2ZQREEoYmFuaywgY3JlYXRvcik7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIF95aWVsZCRmaW5kV2hpdGVsaXN0UDMgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgIF95aWVsZCRmaW5kV2hpdGVsaXN0UDQgPSBfc2xpY2VkVG9BcnJheShfeWllbGQkZmluZFdoaXRlbGlzdFAzLCAyKTsKICAgICAgICAgICAgICAgIGNyZWF0b3JQcm9vZiA9IF95aWVsZCRmaW5kV2hpdGVsaXN0UDRbMF07CiAgICAgICAgICAgICAgICBidW1wMiA9IF95aWVsZCRmaW5kV2hpdGVsaXN0UDRbMV07CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgcmV0dXJuIHByb2dyYW1zLm1ldGFkYXRhLk1ldGFkYXRhLmdldFBEQShnZW1NaW50KTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIG1ldGFkYXRhID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgdGhpcy5kZXBvc2l0R2VtKGJhbmssIHZhdWx0LCB0aGlzLndhbGxldC5wdWJsaWNLZXksIGdlbUFtb3VudCwgZ2VtTWludCwgZ2VtU291cmNlLCBtaW50UHJvb2YsIG1ldGFkYXRhLCBjcmVhdG9yUHJvb2YpKTsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGRlcG9zaXRHZW1XYWxsZXQoX3g3LCBfeDgsIF94OSwgX3gxMCwgX3gxMSwgX3gxMikgewogICAgICAgIHJldHVybiBfZGVwb3NpdEdlbVdhbGxldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZGVwb3NpdEdlbVdhbGxldDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogIndpdGhkcmF3R2VtV2FsbGV0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfd2l0aGRyYXdHZW1XYWxsZXQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KGJhbmssIHZhdWx0LCBnZW1BbW91bnQsIGdlbU1pbnQpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIHRoaXMud2l0aGRyYXdHZW0oYmFuaywgdmF1bHQsIHRoaXMud2FsbGV0LnB1YmxpY0tleSwgZ2VtQW1vdW50LCBnZW1NaW50LCB0aGlzLndhbGxldC5wdWJsaWNLZXkpKTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1LCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gd2l0aGRyYXdHZW1XYWxsZXQoX3gxMywgX3gxNCwgX3gxNSwgX3gxNikgewogICAgICAgIHJldHVybiBfd2l0aGRyYXdHZW1XYWxsZXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHdpdGhkcmF3R2VtV2FsbGV0OwogICAgfSgpCiAgfSwgewogICAga2V5OiAiYWRkVG9XaGl0ZWxpc3RXYWxsZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9hZGRUb1doaXRlbGlzdFdhbGxldCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoYmFuaywgYWRkcmVzc1RvV2hpdGVsaXN0LCB3aGl0ZWxpc3RUeXBlKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iLCB0aGlzLmFkZFRvV2hpdGVsaXN0KGJhbmssIHRoaXMud2FsbGV0LnB1YmxpY0tleSwgYWRkcmVzc1RvV2hpdGVsaXN0LCB3aGl0ZWxpc3RUeXBlKSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNiwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGFkZFRvV2hpdGVsaXN0V2FsbGV0KF94MTcsIF94MTgsIF94MTkpIHsKICAgICAgICByZXR1cm4gX2FkZFRvV2hpdGVsaXN0V2FsbGV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBhZGRUb1doaXRlbGlzdFdhbGxldDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogInJlbW92ZUZyb21XaGl0ZWxpc3RXYWxsZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZW1vdmVGcm9tV2hpdGVsaXN0V2FsbGV0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNyhiYW5rLCBhZGRyZXNzVG9SZW1vdmUpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5hYnJ1cHQoInJldHVybiIsIHRoaXMucmVtb3ZlRnJvbVdoaXRlbGlzdChiYW5rLCB0aGlzLndhbGxldC5wdWJsaWNLZXksIGFkZHJlc3NUb1JlbW92ZSkpOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTcsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiByZW1vdmVGcm9tV2hpdGVsaXN0V2FsbGV0KF94MjAsIF94MjEpIHsKICAgICAgICByZXR1cm4gX3JlbW92ZUZyb21XaGl0ZWxpc3RXYWxsZXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlbW92ZUZyb21XaGl0ZWxpc3RXYWxsZXQ7CiAgICB9KCkKICB9XSk7CgogIHJldHVybiBHZW1CYW5rOwp9KEdlbUJhbmtDbGllbnQpOw=="},{"version":3,"sources":["/home/yagnik-vadadoriya/Desktop/Gem-Farm-17-2022/src/common/gem-bank/index.ts"],"names":[],"mappings":"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","sourcesContent":["import { BN, Idl } from '@project-serum/anchor';\nimport {\n  findWhitelistProofPDA,\n  GEM_BANK_PROG_ID,\n  GemBankClient,\n  WhitelistType,\n} from '@gemworks/gem-farm-ts';\nimport { Connection, Keypair, PublicKey } from '@solana/web3.js';\nimport { SignerWalletAdapter } from '@solana/wallet-adapter-base';\nimport { NodeWallet, programs } from '@metaplex/js';\n\n//when we only want to view vaults, no need to connect a real wallet.\nexport function createFakeWallet() {\n  const leakedKp = Keypair.fromSecretKey(\n    Uint8Array.from([\n      208, 175, 150, 242, 88, 34, 108, 88, 177, 16, 168, 75, 115, 181, 199, 242,\n      120, 4, 78, 75, 19, 227, 13, 215, 184, 108, 226, 53, 111, 149, 179, 84,\n      137, 121, 79, 1, 160, 223, 124, 241, 202, 203, 220, 237, 50, 242, 57, 158,\n      226, 207, 203, 188, 43, 28, 70, 110, 214, 234, 251, 15, 249, 157, 62, 80,\n    ])\n  );\n  return new NodeWallet(leakedKp);\n}\n\n//need a separate func coz fetching IDL is async and can't be done in constructor\nexport async function initGemBank(\n  conn: Connection,\n  wallet?: SignerWalletAdapter\n) {\n  const walletToUse = wallet ?? createFakeWallet();\n  const idl = await (await fetch('gem_bank.json')).json();\n  return new GemBank(conn, walletToUse as any, idl);\n}\n\nexport class GemBank extends GemBankClient {\n  constructor(conn: Connection, wallet: any, idl: Idl) {\n    super(conn, wallet, idl, GEM_BANK_PROG_ID);\n  }\n\n  async initBankWallet() {\n    const bank = Keypair.generate();\n    const txSig = await this.initBank(\n      bank,\n      this.wallet.publicKey,\n      this.wallet.publicKey\n    );\n    return { bank, txSig };\n  }\n\n  async initVaultWallet(bank: PublicKey) {\n    return this.initVault(\n      bank,\n      this.wallet.publicKey,\n      this.wallet.publicKey,\n      this.wallet.publicKey,\n      'test_vault'\n    );\n  }\n\n  async setVaultLockWallet(\n    bank: PublicKey,\n    vault: PublicKey,\n    vaultLocked: boolean\n  ) {\n    return this.setVaultLock(bank, vault, this.wallet.publicKey, vaultLocked);\n  }\n\n  async depositGemWallet(\n    bank: PublicKey,\n    vault: PublicKey,\n    gemAmount: BN,\n    gemMint: PublicKey,\n    gemSource: PublicKey,\n    creator: PublicKey\n  ) {\n    const [mintProof, bump] = await findWhitelistProofPDA(bank, gemMint);\n    const [creatorProof, bump2] = await findWhitelistProofPDA(bank, creator);\n    const metadata = await programs.metadata.Metadata.getPDA(gemMint);\n\n    return this.depositGem(\n      bank,\n      vault,\n      this.wallet.publicKey,\n      gemAmount,\n      gemMint,\n      gemSource,\n      mintProof,\n      metadata,\n      creatorProof\n    );\n  }\n\n  async withdrawGemWallet(\n    bank: PublicKey,\n    vault: PublicKey,\n    gemAmount: BN,\n    gemMint: PublicKey\n  ) {\n    return this.withdrawGem(\n      bank,\n      vault,\n      this.wallet.publicKey,\n      gemAmount,\n      gemMint,\n      this.wallet.publicKey\n    );\n  }\n\n  async addToWhitelistWallet(\n    bank: PublicKey,\n    addressToWhitelist: PublicKey,\n    whitelistType: WhitelistType\n  ) {\n    return this.addToWhitelist(\n      bank,\n      this.wallet.publicKey,\n      addressToWhitelist,\n      whitelistType\n    );\n  }\n\n  async removeFromWhitelistWallet(bank: PublicKey, addressToRemove: PublicKey) {\n    return this.removeFromWhitelist(\n      bank,\n      this.wallet.publicKey,\n      addressToRemove\n    );\n  }\n}\n"],"sourceRoot":""}]}