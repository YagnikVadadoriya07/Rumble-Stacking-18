{"remainingRequest":"/home/yagnik-vadadoriya/Desktop/Gem-Farm-17-2022/node_modules/babel-loader/lib/index.js!/home/yagnik-vadadoriya/Desktop/Gem-Farm-17-2022/node_modules/ts-loader/index.js??ref--14-2!/home/yagnik-vadadoriya/Desktop/Gem-Farm-17-2022/src/common/web3/NFTget.ts","dependencies":[{"path":"/home/yagnik-vadadoriya/Desktop/Gem-Farm-17-2022/src/common/web3/NFTget.ts","mtime":1661228910000},{"path":"/home/yagnik-vadadoriya/Desktop/Gem-Farm-17-2022/babel.config.js","mtime":1661228910000},{"path":"/home/yagnik-vadadoriya/Desktop/Gem-Farm-17-2022/node_modules/cache-loader/dist/cjs.js","mtime":1663235615568},{"path":"/home/yagnik-vadadoriya/Desktop/Gem-Farm-17-2022/node_modules/babel-loader/lib/index.js","mtime":1663235615501},{"path":"/home/yagnik-vadadoriya/Desktop/Gem-Farm-17-2022/node_modules/ts-loader/index.js","mtime":1663235630214}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3lhZ25pay12YWRhZG9yaXlhL0Rlc2t0b3AvR2VtLUZhcm0tMTctMjAyMi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0IHsgUHVibGljS2V5IH0gZnJvbSAnQHNvbGFuYS93ZWIzLmpzJzsKaW1wb3J0IHsgVE9LRU5fUFJPR1JBTV9JRCB9IGZyb20gJ0Bzb2xhbmEvc3BsLXRva2VuJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgcHJvZ3JhbXMgfSBmcm9tICdAbWV0YXBsZXgvanMnOwp2YXIgTWV0YWRhdGEgPSBwcm9ncmFtcy5tZXRhZGF0YS5NZXRhZGF0YTsKCmZ1bmN0aW9uIGdldFRva2Vuc0J5T3duZXIoX3gsIF94MikgewogIHJldHVybiBfZ2V0VG9rZW5zQnlPd25lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfZ2V0VG9rZW5zQnlPd25lcigpIHsKICBfZ2V0VG9rZW5zQnlPd25lciA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShvd25lciwgY29ubikgewogICAgdmFyIHRva2VuczsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiBjb25uLmdldFBhcnNlZFRva2VuQWNjb3VudHNCeU93bmVyKG93bmVyLCB7CiAgICAgICAgICAgICAgcHJvZ3JhbUlkOiBUT0tFTl9QUk9HUkFNX0lECiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgdG9rZW5zID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgdG9rZW5zLnZhbHVlLmZpbHRlcihmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgIHZhciBhbW91bnQgPSB0LmFjY291bnQuZGF0YS5wYXJzZWQuaW5mby50b2tlbkFtb3VudDsKICAgICAgICAgICAgICByZXR1cm4gYW1vdW50LmRlY2ltYWxzID09PSAwICYmIGFtb3VudC51aUFtb3VudCA9PT0gMTsKICAgICAgICAgICAgfSkubWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHB1YmtleTogdC5wdWJrZXksCiAgICAgICAgICAgICAgICBtaW50OiB0LmFjY291bnQuZGF0YS5wYXJzZWQuaW5mby5taW50CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlKTsKICB9KSk7CiAgcmV0dXJuIF9nZXRUb2tlbnNCeU93bmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBnZXRORlRNZXRhZGF0YShfeDMsIF94NCwgX3g1KSB7CiAgcmV0dXJuIF9nZXRORlRNZXRhZGF0YS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfZ2V0TkZUTWV0YWRhdGEoKSB7CiAgX2dldE5GVE1ldGFkYXRhID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihtaW50LCBjb25uLCBwdWJrZXkpIHsKICAgIHZhciBuZnRBcnJheSwgbWV0YWRhdGFQREEsIG9uY2hhaW5NZXRhZGF0YSwgZXh0ZXJuYWxNZXRhZGF0YTsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdQdWxsaW5nIG1ldGFkYXRhIGZvcjonLCBtaW50KTsKICAgICAgICAgICAgbmZ0QXJyYXkgPSBbXTsKICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxOwogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgIHJldHVybiBNZXRhZGF0YS5nZXRQREEobWludCk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBtZXRhZGF0YVBEQSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgIHJldHVybiBNZXRhZGF0YS5sb2FkKGNvbm4sIG1ldGFkYXRhUERBKTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIG9uY2hhaW5NZXRhZGF0YSA9IF9jb250ZXh0Mi5zZW50LmRhdGE7CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTA7CiAgICAgICAgICAgIHJldHVybiBheGlvcy5nZXQob25jaGFpbk1ldGFkYXRhLmRhdGEudXJpKTsKCiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBleHRlcm5hbE1ldGFkYXRhID0gX2NvbnRleHQyLnNlbnQuZGF0YTsKCiAgICAgICAgICAgIGlmICghKGV4dGVybmFsTWV0YWRhdGEuY29sbGVjdGlvbi5uYW1lID09PSAnU292ZXJlaWduJykpIHsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE1OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjb25zb2xlLmxvZygnZXh0ZXJuYWxNZXRhZGF0YS5jb2xsZWN0aW9uLm5hbWUnLCBleHRlcm5hbE1ldGFkYXRhLmNvbGxlY3Rpb24ubmFtZSk7CiAgICAgICAgICAgIG5mdEFycmF5LnB1c2goZXh0ZXJuYWxNZXRhZGF0YSk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgcHVia2V5OiBwdWJrZXkgPyBuZXcgUHVibGljS2V5KHB1YmtleSkgOiB1bmRlZmluZWQsCiAgICAgICAgICAgICAgbWludDogbmV3IFB1YmxpY0tleShtaW50KSwKICAgICAgICAgICAgICBvbmNoYWluTWV0YWRhdGE6IG9uY2hhaW5NZXRhZGF0YSwKICAgICAgICAgICAgICBleHRlcm5hbE1ldGFkYXRhOiBleHRlcm5hbE1ldGFkYXRhCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjA7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTc7CiAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgY29uc29sZS5sb2coImZhaWxlZCB0byBwdWxsIG1ldGFkYXRhIGZvciB0b2tlbiAiLmNvbmNhdChtaW50KSk7CgogICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMSwgMTddXSk7CiAgfSkpOwogIHJldHVybiBfZ2V0TkZUTWV0YWRhdGEuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGdldE5GVE1ldGFkYXRhRm9yTWFueShfeDYsIF94NykgewogIHJldHVybiBfZ2V0TkZUTWV0YWRhdGFGb3JNYW55LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9nZXRORlRNZXRhZGF0YUZvck1hbnkoKSB7CiAgX2dldE5GVE1ldGFkYXRhRm9yTWFueSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTModG9rZW5zLCBjb25uKSB7CiAgICB2YXIgcHJvbWlzZXMsIG5mdHM7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBwcm9taXNlcyA9IFtdOwogICAgICAgICAgICB0b2tlbnMuZm9yRWFjaChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgIHJldHVybiBwcm9taXNlcy5wdXNoKGdldE5GVE1ldGFkYXRhKHQubWludCwgY29ubiwgdC5wdWJrZXkpKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNDsKICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIG5mdHMgPSBfY29udGV4dDMuc2VudC5maWx0ZXIoZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgICByZXR1cm4gISFuOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29uc29sZS5sb2coImZvdW5kICIuY29uY2F0KG5mdHMubGVuZ3RoLCAiIG1ldGFkYXRhcyIpKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIG5mdHMpOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTMpOwogIH0pKTsKICByZXR1cm4gX2dldE5GVE1ldGFkYXRhRm9yTWFueS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpleHBvcnQgZnVuY3Rpb24gZ2V0TkZUc0J5T3duZXIoX3g4LCBfeDkpIHsKICByZXR1cm4gX2dldE5GVHNCeU93bmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9nZXRORlRzQnlPd25lcigpIHsKICBfZ2V0TkZUc0J5T3duZXIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KG93bmVyLCBjb25uKSB7CiAgICB2YXIgdG9rZW5zOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gZ2V0VG9rZW5zQnlPd25lcihvd25lciwgY29ubik7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICB0b2tlbnMgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgY29uc29sZS5sb2coImZvdW5kICIuY29uY2F0KHRva2Vucy5sZW5ndGgsICIgdG9rZW5zIikpOwogICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDY7CiAgICAgICAgICAgIHJldHVybiBnZXRORlRNZXRhZGF0YUZvck1hbnkodG9rZW5zLCBjb25uKTsKCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDQuc2VudCk7CgogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlNCk7CiAgfSkpOwogIHJldHVybiBfZ2V0TkZUc0J5T3duZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQ=="},{"version":3,"sources":["/home/yagnik-vadadoriya/Desktop/Gem-Farm-17-2022/src/common/web3/NFTget.ts"],"names":[],"mappings":"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","sourcesContent":["import { Connection, PublicKey } from '@solana/web3.js';\nimport { TOKEN_PROGRAM_ID } from '@solana/spl-token';\nimport axios from 'axios';\nimport { programs } from '@metaplex/js';\n\nconst {\n  metadata: { Metadata },\n} = programs;\n\nexport interface INFT {\n  pubkey?: PublicKey;\n  mint: PublicKey;\n  onchainMetadata: unknown;\n  externalMetadata: unknown;\n}\n\nasync function getTokensByOwner(owner: PublicKey, conn: Connection) {\n  const tokens = await conn.getParsedTokenAccountsByOwner(owner, {\n    programId: TOKEN_PROGRAM_ID,\n  });\n\n  // initial filter - only tokens with 0 decimals & of which 1 is present in the wallet\n  return tokens.value\n    .filter((t) => {\n      const amount = t.account.data.parsed.info.tokenAmount;\n      return amount.decimals === 0 && amount.uiAmount === 1;\n    })\n    .map((t) => {\n      return { pubkey: t.pubkey, mint: t.account.data.parsed.info.mint };\n    });\n}\n\nexport async function getNFTMetadata(\n  mint: string,\n  conn: Connection,\n  pubkey?: string\n): Promise<INFT | undefined> {\n  // console.log('Pulling metadata for:', mint);\n  var nftArray = [];\n  try {\n    const metadataPDA = await Metadata.getPDA(mint);\n    var onchainMetadata = (await Metadata.load(conn, metadataPDA)).data;\n    var externalMetadata = (await axios.get(onchainMetadata.data.uri)).data;\n    // console.log('external meta', onchainMetadata.mint);\n    if (externalMetadata.collection.name === 'Sovereign') {\n      console.log(\n        'externalMetadata.collection.name',\n        externalMetadata.collection.name\n      );\n      nftArray.push(externalMetadata);\n      return {\n        pubkey: pubkey ? new PublicKey(pubkey) : undefined,\n        mint: new PublicKey(mint),\n        onchainMetadata,\n        externalMetadata,\n      };\n    }\n  } catch (e) {\n    console.log(`failed to pull metadata for token ${mint}`);\n  }\n}\n\nexport async function getNFTMetadataForMany(\n  tokens: any[],\n  conn: Connection\n): Promise<INFT[]> {\n  const promises: Promise<INFT | undefined>[] = [];\n  tokens.forEach((t) => promises.push(getNFTMetadata(t.mint, conn, t.pubkey)));\n  const nfts = (await Promise.all(promises)).filter((n) => !!n);\n  console.log(`found ${nfts.length} metadatas`);\n\n  return nfts as INFT[];\n}\n\nexport async function getNFTsByOwner(\n  owner: PublicKey,\n  conn: Connection\n): Promise<INFT[]> {\n  const tokens = await getTokensByOwner(owner, conn);\n  console.log(`found ${tokens.length} tokens`);\n\n  return await getNFTMetadataForMany(tokens, conn);\n}\n"],"sourceRoot":""}]}